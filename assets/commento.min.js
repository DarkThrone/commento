!function(e,t){"use strict";function n(e){return t.getElementById(e)}function o(e,t){e.appendChild(t)}function r(e,t){return e.dataset[t]}function a(e,t,n){e.dataset[t]=n}function i(e,t){return e.classList.contains(t)}function m(e,t){e.classList.add(t)}function c(e,t){e.classList.remove(t)}function s(e){return t.createElement(e)}function u(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")}function d(e,t,n){e.setAttribute(t,n)}function l(e,t,n){var o=new XMLHttpRequest;o.open("POST",e,!0),o.setRequestHeader("Content-type","application/x-www-form-urlencoded"),o.onreadystatechange=function(){4===o.readyState&&200===o.status&&n(o)},o.send(u(t))}function p(e,n){var r=t.createElement("script"),a=!1;r.type="application/javascript",r.src=e,r.async=!0,r.onreadystatechange=r.onload=function(){a||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||n(),a=!0,r.onload=r.onreadystatechange=null},o(t.body,r)}function v(e){var n=s("link"),r=t.getElementsByTagName("head")[0];n.type="text/css",d(n,"href",e),d(n,"rel","stylesheet"),o(r,n)}function h(e,t){var n=e-t;return n<6e4?Math.round(n/1e3)+" seconds ago":n<36e5?Math.round(n/6e4)+" minutes ago":n<864e5?Math.round(n/36e5)+" hours ago":n<2592e6?"approximately "+Math.round(n/864e5)+" days ago":n<94608e7?"approximately "+Math.round(n/2592e6)+" months ago":"approximately "+Math.round(n/94608e7)+" years ago"}function f(e,t,n){return function(o){var a,m=o.target;i(m,e)&&(a=r(m,t))&&n(a)}}var y,g="commento-reply-textarea-",b="/assets/showdown.min.js",w="/assets/spectre.min.css",L="/assets/commento.min.css",M="",H=!1,E={},T=function(){var e={url:t.location};l(E.get,e,function(e){x(JSON.parse(e.response).comments)})},j=function(e,t){var n=e[t];if(!n||!n.length)return null;var r=s("div");return n.forEach(function(t){var n=s("div"),i=s("div"),c=s("h5"),u=s("div"),d=s("div"),l=s("div"),p=s("button"),v=j(e,t.id);d.id="commento-body-"+t.id,p.id="commento-reply-button-"+t.id,c.innerHTML=t.name,d.innerHTML=y.makeHtml(t.comment),u.innerHTML=h(Date.now(),Date.parse(t.timestamp)),p.innerHTML="Reply",a(p,"commentId",t.id),m(n,"card"),m(i,"card-header"),m(c,"h5"),m(u,"card-subtitle"),m(u,"extra-margin"),m(d,"card-body"),m(l,"card-footer"),m(p,"btn"),m(p,"commento-show-reply-js"),o(l,p),o(i,c),o(i,u),o(n,i),o(n,d),o(n,l),v&&(m(v,"card-body"),o(n,v)),o(r,n)}),r},x=function(e){if(e){var t,r=n("commento-coms"),a={};r.innerHTML="",e.forEach(function(e){t=e.parent,t in a||(a[t]=[]),a[t].push(e)});var i=j(a,-1);i&&o(r,i)}},C=function(){var e,o=n("commento-root-comment"),r=n("commento-root-name"),a=o.value,i=r.value;return c(o,"is-error"),c(r,"is-error"),a&&a.length?i&&i.length?(e={url:t.location,comment:o.value,name:r.value,parent:-1},H&&(e.gotcha=n("commento-root-gotcha").value),void l(E.create,e,function(){o.value="",T()})):void m(r,"is-error"):void m(o,"is-error")},I=function(e){var o=n(g+e),r=n("commento-name-input-"+e),a=o.value,i=r.value;if(c(o,"is-error"),c(r,"is-error"),!a||!a.length)return void m(o,"is-error");if(!i||!i.length)return void m(r,"is-error");var s={comment:a,name:i,parent:e,url:t.location};H&&(s.gotcha=n("commento-gotcha-"+e).value),l(E.create,s,T)},k=function(e){n(g+e).remove(),n("commento-submit-button-"+e).remove(),n("commento-cancel-button-"+e).remove(),n("commento-name-input-"+e).remove(),m(n("commento-reply-button-"+e),"initial")},R=function(e){var t=n("commento-body-"+e),r=s("textarea"),i=s("input"),c=s("input"),u=s("button"),l=s("button"),p=s("div");r.id=g+e,i.id="commento-name-input-"+e,c.id="commento-gotcha-"+e,u.id="commento-cancel-button-"+e,l.id="commento-submit-button-"+e,u.innerHTML="Cancel",l.innerHTML="Reply",a(u,"commentId",e),a(l,"commentId",e),m(n("commento-reply-button-"+e),"hidden"),m(r,"form-input"),m(i,"margin"),m(i,"form-input"),m(c,"hidden"),m(u,"commento-js-cancel"),m(u,"margin"),m(u,"btn"),m(l,"margin"),m(l,"btn"),m(l,"btn-primary"),m(l,"commento-submit-js"),m(p,"button-holder"),d(i,"placeholder","Name"),o(t,r),o(p,i),H&&o(p,c),o(p,u),o(p,l),o(t,p)},S=e.Commento||{};S.version="0.2.0",S.init=function(e){M=e.serverUrl||M,H=e.honeypot||H,b=e.showdownUrl||M+b,w=e.spectreUrl||M+w,L=e.commentoCssUrl||M+L,E.get=M+"/get",E.create=M+"/create",v(w),v(L),p(b,function(){y=new showdown.Converter;var e=n("commento"),t=s("div"),r=s("textarea"),a=s("div"),i=s("input"),c=s("button"),u=s("input"),l=s("div");r.id="commento-root-comment",i.id="commento-root-name",l.id="commento-coms",u.id="commento-root-gotcha",c.innerHTML="Post comment",m(t,"comments"),m(r,"form-input"),m(a,"submit-area"),m(i,"form-input"),m(i,"root-elem"),m(c,"root-elem"),m(c,"btn"),m(c,"btn-primary"),m(u,"hidden"),d(i,"placeholder","Name"),c.addEventListener("click",C),e.addEventListener("click",f("commento-show-reply-js","commentId",R)),e.addEventListener("click",f("commento-js-cancel","commentId",k)),e.addEventListener("click",f("commento-submit-js","commentId",I)),o(a,i),o(a,c),H&&o(a,u),o(t,r),o(t,a),o(t,l),o(e,t),T()})},e.Commento=S}(window,document);